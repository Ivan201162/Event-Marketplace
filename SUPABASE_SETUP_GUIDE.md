# üóÑÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Supabase –¥–ª—è Event Marketplace

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)**
2. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç** –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
3. **–ù–∞–∂–º–∏—Ç–µ "New Project"**
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞:**
   - **Name**: `event-marketplace-app`
   - **Database Password**: —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º —Ä–µ–≥–∏–æ–Ω
   - **Pricing Plan**: Free (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. **–û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor** –≤ –ø–∞–Ω–µ–ª–∏ Supabase
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase/social_schema.sql`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü** –≤ —Ä–∞–∑–¥–µ–ª–µ "Table Editor"

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí API**
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:**
   - **Project URL**
   - **anon public key**
   - **service_role key** (–¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RLS (Row Level Security)

RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å—Ö–µ–º—É, –Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω–∏ –∞–∫—Ç–∏–≤–Ω—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ RLS
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE schemaname = 'public';
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Authentication ‚Üí Settings**
2. **–í–∫–ª—é—á–∏—Ç–µ Email authentication**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ URL redirects** (–¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏):
   - `http://localhost:3000/auth/callback`
   - `https://yourdomain.com/auth/callback`

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Storage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Storage**
2. **–°–æ–∑–¥–∞–π—Ç–µ bucket** `avatars` –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞**

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `lib/config/supabase_config.dart`:

```dart
class SupabaseConfig {
  static const String url = 'YOUR_SUPABASE_URL';
  static const String anonKey = 'YOUR_ANON_KEY';
  static const String serviceRoleKey = 'YOUR_SERVICE_ROLE_KEY';
}
```

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase

–û–±–Ω–æ–≤–∏—Ç–µ `lib/main.dart`:

```dart
import 'package:supabase_flutter/supabase_flutter.dart';
import 'config/supabase_config.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  await Supabase.initialize(
    url: SupabaseConfig.url,
    anonKey: SupabaseConfig.anonKey,
  );
  
  runApp(const ProviderScope(child: EventMarketplaceApp()));
}
```

## üìä –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor:

```sql
-- –í—Å—Ç–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
INSERT INTO profiles (id, username, name, avatar_url, city, bio, skills) VALUES
('user1', 'alex_photographer', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –§–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤', 'https://example.com/avatar1.jpg', '–ú–æ—Å–∫–≤–∞', '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ —Å 5-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º', ARRAY['–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è', '–°–≤–∞–¥—å–±—ã', '–ü–æ—Ä—Ç—Ä–µ—Ç—ã']),
('user2', 'maria_dj', '–ú–∞—Ä–∏—è DJ', 'https://example.com/avatar2.jpg', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', 'DJ –∏ –≤–µ–¥—É—â–∞—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π', ARRAY['DJ', '–í–µ–¥—É—â–∞—è', '–ú—É–∑—ã–∫–∞']),
('user3', 'dmitry_video', '–î–º–∏—Ç—Ä–∏–π –í–∏–¥–µ–æ–≥—Ä–∞—Ñ', 'https://example.com/avatar3.jpg', '–ö–∞–∑–∞–Ω—å', '–í–∏–¥–µ–æ–≥—Ä–∞—Ñ –∏ –º–æ–Ω—Ç–∞–∂–µ—Ä', ARRAY['–í–∏–¥–µ–æ—Å—ä–µ–º–∫–∞', '–ú–æ–Ω—Ç–∞–∂', '–ê—ç—Ä–æ—Å—ä–µ–º–∫–∞']);

-- –í—Å—Ç–∞–≤–∫–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
INSERT INTO weekly_stats (user_id, score_7d) VALUES
('user1', 150),
('user2', 120),
('user3', 100);

-- –í—Å—Ç–∞–≤–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
INSERT INTO follows (follower_id, following_id) VALUES
('user2', 'user1'),
('user3', 'user1'),
('user1', 'user2');
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —á–∞—Ç–æ–≤

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
INSERT INTO chats (id) VALUES ('chat1');

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
INSERT INTO chat_participants (chat_id, user_id) VALUES
('chat1', 'user1'),
('chat1', 'user2');

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
INSERT INTO messages (chat_id, sender_id, text) VALUES
('chat1', 'user1', '–ü—Ä–∏–≤–µ—Ç! –ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ñ–æ—Ç–æ—Å—ä–µ–º–∫–∞ —Å–≤–∞–¥—å–±—ã'),
('chat1', 'user2', '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏'),
('chat1', 'user1', '–°–≤–∞–¥—å–±–∞ 15 –∏—é–Ω—è, –æ–∫–æ–ª–æ 50 –≥–æ—Å—Ç–µ–π');
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
ORDER BY table_name;
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π
SELECT * FROM profiles;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
SELECT * FROM weekly_stats;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
SELECT * FROM follows;
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

```sql
-- –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏–¥–µ—Ä–æ–≤
SELECT * FROM get_weekly_leaders('–ú–æ—Å–∫–≤–∞', 5);

-- –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞
SELECT get_or_create_chat('user1', 'user3');
```

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** –∫–ª—é—á–∏ API –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ** –∫–ª—é—á–∏ API

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã**
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
flutter run --debug
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
```bash
flutter run -d <device_id> --debug
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ Realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Supabase –ø—Ä–æ–µ–∫—Ç** –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
2. **–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏**
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Event Marketplace –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ




