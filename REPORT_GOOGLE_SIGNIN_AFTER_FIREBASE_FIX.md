# –û—Ç—á—ë—Ç: Google Sign-In –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Firebase

**–î–∞—Ç–∞**: 6 –Ω–æ—è–±—Ä—è 2025, 23:20 MSK  
**–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: 5.12.0 (versionCode: 22)  
**–ú–∞—Ä–∫–µ—Ä —Å–±–æ—Ä–∫–∏**: v5.12-full-fix

## 1. –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ google-services.json
- ‚úÖ –§–∞–π–ª `android/app/google-services.json` –æ–±–Ω–æ–≤–ª—ë–Ω –≤—Ä—É—á–Ω—É—é
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω `certificate_hash`: `a2179ae3c52226d72edbf194e5f9e280b8e3b9fd` (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–≤–æ–º—É SHA1)
- ‚úÖ `package_name`: `com.eventmarketplace.app` (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å applicationId)

### 1.2 –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ `flutter clean` –≤—ã–ø–æ–ª–Ω–µ–Ω
- ‚úÖ `flutter pub get` –≤—ã–ø–æ–ª–Ω–µ–Ω
- ‚úÖ `flutter build apk --release --no-tree-shake-icons` —É—Å–ø–µ—à–Ω–æ (79.6MB)
- ‚úÖ APK —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ `34HDU20228002261`
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ

## 2. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 2.1 –£—Å–ø–µ—à–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:

```
11-06 23:20:27.755 27143 27143 I flutter : APP: APP: GOOGLE FIX FLOW STARTED
11-06 23:20:32.720 27143 27143 I flutter : APP: APP: GOOGLE FIX CONFIRMED: No current user
11-06 23:20:32.737 27143 27143 I flutter : APP: AUTH_SCREEN_SHOWN
11-06 23:20:32.783 27143 27143 I flutter : APP: AUTH_SCREEN_SHOWN
```

### 2.2 –û—à–∏–±–∫–∞ Google Sign-In:

```
11-06 23:20:35.196 27143 27143 I flutter : Google sign-in error: unknown - An internal error has occurred.
```

### 2.3 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –ª–æ–≥–æ–≤:

- Firebase Auth –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å Google Sign-In: `com.eventmarketplace.app/com.google.firebase.auth.internal.GenericIdpActivity`
- –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã SSL –æ—à–∏–±–∫–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (–≤–æ–∑–º–æ–∂–Ω–æ, —Å–≤—è–∑–∞–Ω—ã —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º/–Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º)

## 3. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### 3.1 –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏:

1. **SHA-–∫–ª—é—á–∏ –µ—â—ë –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ Firebase**
   - –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è SHA-–∫–ª—é—á–µ–π –≤ Firebase Console –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤—Ä–µ–º—è (–¥–æ 5-10 –º–∏–Ω—É—Ç) –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–æ–¥–æ–∂–¥–∞—Ç—å 5-10 –º–∏–Ω—É—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É

2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å SSL –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**
   - –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã SSL –æ—à–∏–±–∫–∏: `CertificateException`, `CertPathValidatorException: Trust anchor for certification path not found`
   - –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º/–Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ Huawei
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Google Sign-In**
   - –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Firebase Console
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ OAuth client –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Firebase

### 3.2 –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ AuthGate —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ Firebase Auth –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å Google Sign-In (GenericIdpActivity)

### 3.3 –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

- ‚ùå Google Sign-In –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π: "An internal error has occurred"

## 4. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 4.1 –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü–æ–¥–æ–∂–¥–∞—Ç—å 5-10 –º–∏–Ω—É—Ç** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è SHA-–∫–ª—é—á–µ–π –≤ Firebase
2. **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–Ω–æ–≤–∞** –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏

### 4.2 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Firebase Console:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ SHA-–∫–ª—é—á–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ OAuth client –∞–∫—Ç–∏–≤–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `google-services.json` —Å–∫–∞—á–∞–Ω –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Google Play Services:**
   ```bash
   adb -s 34HDU20228002261 shell dumpsys package com.google.android.gms | grep versionName
   ```

4. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ** (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

## 5. –§–∞–π–ª—ã –ª–æ–≥–æ–≤

- **–û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥**: `logs/google_signin_after_firebase_fix.txt`
- **–î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥**: `logs/google_signin_detailed.txt`

## 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 6.1 SHA-–∫–ª—é—á–∏ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Firebase):

```
SHA1: A2:17:9A:E3:C5:22:26:D7:2E:DB:F1:94:E5:F9:E2:80:B8:E3:B9:FD
SHA-256: F0:FD:C2:E0:86:37:6C:5F:64:D4:92:0F:1F:63:50:36:D8:4F:E9:9D:34:2D:5D:46:1C:14:9D:D8:DF:6F:F1:2A
```

### 6.2 Certificate Hash –≤ google-services.json:

```json
"certificate_hash": "a2179ae3c52226d72edbf194e5f9e280b8e3b9fd"
```

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç SHA1: `A2:17:9A:E3:C5:22:26:D7:2E:DB:F1:94:E5:F9:E2:80:B8:E3:B9:FD` (–±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏–π, –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä) ‚úÖ

## 7. –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:

- Release keystore —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- SHA-–∫–ª—é—á–∏ –ø–æ–ª—É—á–µ–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Firebase
- google-services.json –æ–±–Ω–æ–≤–ª—ë–Ω
- APK —Å–æ–±—Ä–∞–Ω —Å release-–∫–ª—é—á–æ–º
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –∑–∞–ø—É—â–µ–Ω–æ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:

- Google Sign-In –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π "An internal error has occurred"
- –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è SHA-–∫–ª—é—á–µ–π, SSL –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase

### üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. –ü–æ–¥–æ–∂–¥–∞—Ç—å 5-10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è SHA-–∫–ª—é—á–µ–π
2. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google
3. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Firebase Console –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –û—à–∏–±–∫–∞ "An internal error has occurred" —á–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ SHA-–∫–ª—é—á–µ–π –≤ Firebase. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É.

