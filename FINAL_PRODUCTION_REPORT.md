# –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢: Production Stage 1 Hardening

**–î–∞—Ç–∞/–≤—Ä–µ–º—è:** 2025-11-03 15:05:36  
**–í–µ—Ç–∫–∞:** `prod/stage1-hardening`  
**–ö–æ–º–º–∏—Ç:** `59978d85`

---

## ‚úÖ PRODUCTION FLAGS (–°–æ—Å—Ç–æ—è–Ω–∏–µ)

- ‚úÖ `kProduction = true`
- ‚úÖ `kUseDemoData = false`
- ‚úÖ `kAutoSeedOnStart = false`
- ‚úÖ `kShowFeedFab = false`
- ‚úÖ `kEnableFollowingFeed = true`
- ‚úÖ `kShowFeedStories = true`
- ‚úÖ `kStoriesTtl = Duration(hours: 24)`

**–§–∞–π–ª:** `lib/core/config/app_config.dart` ‚Äî –≤—Å–µ —Ñ–ª–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## ‚úÖ AUTH & ROLE FLOW

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–∫–ª—é—á–µ–Ω–æ/—Ä–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –ù–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Äî –ª–æ–≥–∏–Ω (`initialLocation: '/login'` –≤ `app_router_minimal_working.dart`)
- ‚úÖ –ì–æ—Å—Ç–µ–≤–æ–π –≤—Ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á—ë–Ω
- ‚úÖ –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏ (`/role-selection`) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –õ–æ–≥–∏–∫–∞: Email/Google/Phone ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç `role` ‚Üí `/role-selection` ‚Üí –≥–ª–∞–≤–Ω–∞—è
- ‚úÖ –ü–æ–ª—è –∏–º—è/–≥–æ—Ä–æ–¥/–æ–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ)

**–§–∞–π–ª—ã:**
- `lib/core/app_router_minimal_working.dart` ‚Äî —Ä–æ—É—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- `lib/screens/auth/role_selection_screen.dart` ‚Äî —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `lib/screens/auth/auth_check_screen.dart` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

---

## ‚úÖ –ì–õ–ê–í–ù–ê–Ø (Home Screen)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –í–µ—Ä—Ö: –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–≤–∞—Ç–∞—Ä–æ–º (tap ‚Üí –ø—Ä–æ—Ñ–∏–ª—å), –∂–∏—Ä–Ω–æ–µ –∏–º—è, @username
- ‚úÖ –ò–∫–æ–Ω–∫–∞ ‚öôÔ∏è –≤ AppBar ‚Üí —ç–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ (`/settings`)
- ‚úÖ –ö–Ω–æ–ø–∫–∏:
  - "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" ‚Üí `/create-request` ‚úÖ
  - "–ù–∞–π—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞" ‚Üí `/search` ‚úÖ
- ‚úÖ –ë–ª–æ–∫–∏:
  - "–õ—É—á—à–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –Ω–µ–¥–µ–ª–∏ ‚Äî –†–æ—Å—Å–∏—è" ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `topSpecialistsByRussiaProvider` (–ø–æ `scoreWeekly`, fallback –Ω–∞ `rating`)
  - "–õ—É—á—à–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –Ω–µ–¥–µ–ª–∏ ‚Äî {–≥–æ—Ä–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è}" ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `topSpecialistsByCityProvider` (–ø–æ `scoreWeekly`, fallback –Ω–∞ `rating`)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã (–Ω–µ –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –≥–ª–∞–≤–Ω–æ–π (–±—ã–ª–∞ —É–±—Ä–∞–Ω–∞ —Ä–∞–Ω–µ–µ)

**–§–∞–π–ª:** `lib/screens/home/home_screen_simple.dart`

---

## ‚úÖ –õ–ï–ù–¢–ê (Feed)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –õ–µ–Ω—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç—ã –ø–æ–¥–ø–∏—Å–æ–∫ (`getFollowingFeed()` —Å chunked `whereIn`)
- ‚úÖ Stories —Ç–æ–ª—å–∫–æ –≤ –ª–µ–Ω—Ç–µ, TTL 24 —á–∞—Å–∞ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `expiresAt`)
- ‚úÖ FAB –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è)
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä: `followingFeedProvider` ‚Üí `FeedService.getFollowingFeed()`

**–§–∞–π–ª:** `lib/services/feed_service.dart` ‚Äî –º–µ—Ç–æ–¥ `getFollowingFeed()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å chunking –¥–ª—è `whereIn` (–º–∞–∫—Å–∏–º—É–º 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ chunk).

---

## ‚úÖ –ü–†–û–§–ò–õ–¨ (Profile)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å: –∏–º—è –∂–∏—Ä–Ω—ã–º, @username –≤—ã—à–µ, –∞–≤–∞—Ç–∞—Ä —Å –æ–±—Ä–µ–∑–∫–æ–π
- ‚úÖ Stories –≤ –ø—Ä–æ—Ñ–∏–ª–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º (—Ç–æ–ª—å–∫–æ –≤ –ª–µ–Ω—Ç–µ)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" (–º–µ–Ω—é): –ü–æ—Å—Ç, Reels, –ò–¥–µ—è (–∑–∞—è–≤–∫—É –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å)
- ‚úÖ –ü–æ—Å—Ç/Reels: –º–µ–¥–∏–∞ –≤ Firebase Storage, –¥–æ 10 —Ñ–æ—Ç–æ –∏–ª–∏ 1 –≤–∏–¥–µ–æ
- ‚úÖ –ò–¥–µ—è: –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ª–µ–Ω—Ç—É, —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–∑–¥–µ–ª "–ò–¥–µ–∏" –∏ –ø—Ä–æ—Ñ–∏–ª–µ
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞/–û—Ç–ø–∏—Å–∫–∞ (real-time), —Å—á–µ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —ç–∫—Ä–∞–Ω–µ: –º–∞–∫—Å–∏–º—É–º –ø–æ–ª–µ–π (–≥–æ—Ä–æ–¥/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏/—É—Å–ª—É–≥–∏/–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ), –≤—Å–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã

**–§–∞–π–ª—ã:**
- `lib/screens/profile/profile_screen_advanced.dart`
- `lib/screens/profile/edit_profile_advanced.dart`

---

## ‚úÖ –ò–î–ï–ò (Ideas - Shorts)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ MVP/UI –≥–æ—Ç–æ–≤, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

- ‚úÖ –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π PageView –¥–ª—è Shorts —Ñ–æ—Ä–º–∞—Ç–∞ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω `PageView.builder` —Å `scrollDirection: Axis.vertical`)
- ‚úÖ –ò–¥–µ–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ –∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —Ñ–æ—Ç–æ
- ‚úÖ –õ–∞–π–∫–∏/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏/—à–µ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä `ideasProvider` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `StreamProvider`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–¥–µ–∏ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞ ‚Äî Firebase Storage
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Firestore (–±–µ–∑ mock)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `lib/screens/ideas/ideas_screen.dart` ‚Äî –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π PageView, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ideasProvider`
- `lib/models/idea.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `fromFirestore()` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `lib/providers/ideas_provider.dart` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## ‚úÖ –ö–ï–ô–°–´/–ü–û–†–¢–§–û–õ–ò–û –°–ü–ï–¶–ò–ê–õ–ò–°–¢–û–í

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –†–∞–∑–¥–µ–ª "–ö–µ–π—Å—ã" –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã/–∫–µ–π—Å–∞ —Å –≥–∞–ª–µ—Ä–µ–µ–π)
- ‚ö†Ô∏è –õ–∏–º–∏—Ç—ã (50 —Ñ–æ—Ç–æ, 20 –≤–∏–¥–µ–æ) —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏/–¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –ü–æ–ª–µ "–¶–µ–Ω–∞ —Ä–∞–±–æ—Ç—ã" –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –õ–∏–º–∏—Ç—ã —É–∫–∞–∑–∞–Ω—ã –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö, –Ω–æ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –∫–æ–¥–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–µ–π—Å–∞.

---

## ‚úÖ –†–ï–ô–¢–ò–ù–ì –°–ü–ï–¶–ò–ê–õ–ò–°–¢–û–í

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ

- ‚úÖ –°—Ö–µ–º–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∞: `events_*`, `specialist_stats`, `specialist_scores`, Cloud Functions –ø–µ—Ä–µ—Å—á—ë—Ç–∞ (cron –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç)
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã "—Ç–æ–ø –Ω–µ–¥–µ–ª–∏" –∏—Å–ø–æ–ª—å–∑—É—é—Ç `scoreWeekly` (fallback –Ω–∞ `rating`)
- ‚úÖ `topSpecialistsByRussiaProvider` ‚Äî –ø–æ `scoreWeekly DESC`, —Ñ–∏–ª—å—Ç—Ä `country='RU'`
- ‚úÖ `topSpecialistsByCityProvider` ‚Äî –ø–æ `scoreWeekly DESC`, —Ñ–∏–ª—å—Ç—Ä `city=userCity`

**–§–∞–π–ª—ã:**
- `lib/providers/specialist_providers.dart` ‚Äî –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- `functions/src/computeScores.ts` ‚Äî Cloud Function –ø–µ—Ä–µ—Å—á—ë—Ç–∞
- `functions/src/triggers.ts` ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π

---

## ‚úÖ RULES/INDEXES DEPLOY

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

- ‚úÖ `firebase deploy --only firestore:rules` ‚Äî —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ
- ‚úÖ `firebase deploy --only firestore:indexes` ‚Äî —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ
- ‚ö†Ô∏è –ë—ã–ª–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ single-field –∏–Ω–¥–µ–∫—Å–∞—Ö –¥–ª—è `specialist_scores` (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## ‚ö†Ô∏è –û–ß–ò–°–¢–ö–ê –ë–î –ò STORAGE

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è Service Account –∫–ª—é—á

- ‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç `tools/clean_test_data.ts` —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤
- ‚ùå Service Account –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω (`firebase-service-account.json` –∏–ª–∏ `service-account-key.json`)
- ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `GOOGLE_APPLICATION_CREDENTIALS` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- ‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

**–£–¥–∞–ª–µ–Ω–æ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º:** ‚Äî (—Å–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)  
**–§–∞–π–ª–æ–≤ —É–¥–∞–ª–µ–Ω–æ:** ‚Äî (—Å–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)  
**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:** ‚Äî (—Å–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)  
**–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:** ‚Äî (—Å–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ–ª—É—á–∏—Ç—å Service Account –∫–ª—é—á –∏–∑ Firebase Console –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `npx ts-node tools/clean_test_data.ts`.

---

## üì± APK

**–ü—É—Ç—å:** `build/app/outputs/flutter-apk/app-release.apk`  
**–°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏:** ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–∑–∞–ø—É—â–µ–Ω–∞ –≤ —Ñ–æ–Ω–µ)  
**–†–∞–∑–º–µ—Ä:** ‚Äî (APK –µ—â—ë —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è)  
**SHA1:** ‚Äî (APK –µ—â—ë —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è)

**–°—Ç–∞—Ç—É—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** ‚è∏Ô∏è –û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏

---

## üß™ SMOKE-–¢–ï–°–¢ –õ–û–ì

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚ùå "Auth screen shown" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå "Role selection shown" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå "Home loaded" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå "Feed empty or posts loaded" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå "Requests screen loads" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå "Chats query ok" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå "Ideas feed loads" ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–∫–∞–∑–∞–ª–æ –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π, –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –∏–ª–∏ –ª–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —ç—Ç–∏—Ö –º–µ—Ç–æ–∫. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.

---

## üìù –£–î–ê–õ–Å–ù–ù–´–ï –¢–ï–°–¢–û–í–´–ï –î–ê–ù–ù–´–ï –ò–ó –ö–û–î–ê

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- ‚úÖ `lib/providers/ideas_provider.dart` ‚Äî —É–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ `lib/providers/chats_provider.dart` ‚Äî —É–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Firestore
- ‚úÖ `lib/screens/requests/requests_screen_improved.dart` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `requestsProvider` –≤–º–µ—Å—Ç–æ mock
- ‚úÖ `lib/screens/home/home_screen_simple.dart` ‚Äî —É–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ `lib/screens/ideas/ideas_screen.dart` ‚Äî —É–¥–∞–ª–µ–Ω—ã mock –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ideasProvider`

**–§–∞–π–ª—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (—Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏):**
- ‚ö†Ô∏è `lib/screens/booking_requests_screen.dart` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ bookings (—Ç—Ä–µ–±—É–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è)

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

**‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏**

### –†–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ Production —Ñ–ª–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ Auth flow –∏ –≤—ã–±–æ—Ä —Ä–æ–ª–∏
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—É—Å–µ–ª—è–º–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
- ‚úÖ –õ–µ–Ω—Ç–∞ –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ò–¥–µ–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Shorts (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π PageView)
- ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –∏ –∏–Ω–¥–µ–∫—Å—ã Firestore –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- ‚ö†Ô∏è –û—á–∏—Å—Ç–∫–∞ –ë–î/Storage (–Ω—É–∂–µ–Ω Service Account –∫–ª—é—á)
- ‚ö†Ô∏è APK –µ—â—ë —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)
- ‚ö†Ô∏è Smoke-—Ç–µ—Å—Ç—ã –Ω–µ –ø–æ–∫–∞–∑–∞–ª–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
- ‚ö†Ô∏è –ö–µ–π—Å—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ (50 —Ñ–æ—Ç–æ, 20 –≤–∏–¥–µ–æ)

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:

1. **Service Account –∫–ª—é—á:**
   - –ü–æ–ª—É—á–∏—Ç—å –∏–∑ Firebase Console: Project Settings ‚Üí Service Accounts ‚Üí Generate New Private Key
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ `firebase-service-account.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å: `npx ts-node tools/clean_test_data.ts`

2. **APK:**
   - –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∏ SHA1
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: `adb install -r build/app/outputs/flutter-apk/app-release.apk`

3. **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   - ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è via phone ‚Üí –≤—ã–±–æ—Ä —Ä–æ–ª–∏ ‚Üí –≥–ª–∞–≤–Ω–∞—è
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–¥–µ–∏-—à–æ—Ä—Ç—Å–∞
   - ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ª–µ–Ω—Ç–µ
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ–π—Å–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–ª–∏–º–∏—Ç—ã 50 —Ñ–æ—Ç–æ, 20 –≤–∏–¥–µ–æ)

4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
   - –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `lib/screens/booking_requests_screen.dart`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è –∫–µ–π—Å–æ–≤/–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

**–ö–æ–º–º–∏—Ç—ã:**
- `59978d85` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π PageView –¥–ª—è –∏–¥–µ–π, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ Idea

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `lib/core/config/app_config.dart` ‚Äî production —Ñ–ª–∞–≥–∏ ‚úÖ
- `lib/core/app_router_minimal_working.dart` ‚Äî initialLocation: '/login' ‚úÖ
- `lib/screens/home/home_screen_simple.dart` ‚Äî —É–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚úÖ
- `lib/screens/settings/settings_screen.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é ‚úÖ
- `lib/providers/chats_provider.dart` ‚Äî —É–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ
- `lib/providers/ideas_provider.dart` ‚Äî —É–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ
- `lib/screens/requests/requests_screen_improved.dart` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ
- `lib/screens/ideas/ideas_screen.dart` ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π PageView, —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ
- `lib/models/idea.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `fromFirestore()` ‚úÖ

**Deploy:**
- ‚úÖ Firestore Rules ‚Äî —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Firestore Indexes ‚Äî —É—Å–ø–µ—à–Ω–æ

---

**–û—Ç—á—ë—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (Service Account –∫–ª—é—á) –∏–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ (—Å–±–æ—Ä–∫–∞ APK).**
