# üîê –û–¢–ß–ï–¢ –û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: ${DateTime.now().toString()}  
**–í–µ—Ç–∫–∞**: `feat/auth-routing`  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**  
**–í–µ—Ä—Å–∏—è Flutter**: 3.35.x  
**–í–µ—Ä—Å–∏—è Dart**: 3.5+

---

## üéØ **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò**

### ‚úÖ **1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ feat/auth-routing**
- –í–µ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ö–æ–º–º–∏—Ç: `28c95a4` - "feat(auth): email/google/guest auth + start routing"
- Push –≤ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω

### ‚úÖ **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (lib/main.dart)**
- **AuthGate** –≤–∏–¥–∂–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Ä–æ—É—Ç–∏–Ω–≥
- –ù–∞—á–∞–ª—å–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ `/auth`
- –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
  - –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí `/auth`
  - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí `/home`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚úÖ **3. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ login_register_screen.dart**
- **–ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**:
  - –ü–æ–ª–µ –∏–º–µ–Ω–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
  - Email (–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞)
  - –ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
  - –í—ã–±–æ—Ä —Ä–æ–ª–∏ (–ó–∞–∫–∞–∑—á–∏–∫/–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç)
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è email/–ø–∞—Ä–æ–ª—å** —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **Google Sign-In** (–≤–µ–± –∏ –º–æ–±–∏–ª—å–Ω—ã–π)
- **VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–π
- **–ì–æ—Å—Ç–µ–≤–æ–π –≤—Ö–æ–¥** (`signInAsGuest`)
- **–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è** —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

### ‚úÖ **4. –°–æ–∑–¥–∞–Ω–∏–µ AuthGate –≤–∏–¥–∂–µ—Ç–∞**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Riverpod –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

### ‚úÖ **5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ null-safety**
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã deprecated –º–µ—Ç–æ–¥—ã (`withOpacity` ‚Üí `withValues`)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `signInAsGuest` –≤–º–µ—Å—Ç–æ `signInAnonymously`

### ‚úÖ **6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**
- **flutter analyze**: ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã**: ‚úÖ –ö–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- **–í–µ–±-—Å–±–æ—Ä–∫–∞**: ‚ö†Ô∏è –ï—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö (–Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø**

### **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**
```dart
// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
initialLocation: '/auth'

// –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
if (!isLoggedIn && !isAuthRoute && !isPublicRoute) {
  return '/auth';
}
if (isLoggedIn && (isAuthRoute || isRegisterRoute)) {
  return AppRoutes.home;
}
```

### **AuthGate Widget**
```dart
class AuthGate extends ConsumerWidget {
  // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ /home –µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç LoginRegisterScreen –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
}
```

### **LoginRegisterScreen**
```dart
class LoginRegisterScreen extends ConsumerStatefulWidget {
  // –§–æ—Ä–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
  // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞
  // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ (Google, VK)
  // –ì–æ—Å—Ç–µ–≤–æ–π –≤—Ö–æ–¥
}
```

---

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò**

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
1. **Email/–ü–∞—Ä–æ–ª—å** - `signInWithEmailAndPassword`
2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - `signUpWithEmailAndPassword`
3. **Google** - `signInWithGoogle`
4. **VK** - `signInWithVK`
5. **–ì–æ—Å—Ç—å** - `signInAsGuest`
6. **–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è** - `resetPassword`

### **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º**
- Email: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —á–µ—Ä–µ–∑ RegExp
- –ü–∞—Ä–æ–ª—å: –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ò–º—è: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –†–æ–ª—å: –≤—ã–±–æ—Ä –º–µ–∂–¥—É –ó–∞–∫–∞–∑—á–∏–∫/–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç

### **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Firestore**
```dart
// –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç users/{uid}
final appUser = AppUser.fromFirebaseUser(
  firebaseUser.uid,
  email,
  displayName: displayName,
  role: role,
);
await _firestore.collection('users').doc(firebaseUser.uid).set(appUser.toMap());
```

---

## üöÄ **–†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- ‚úÖ –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–¥–µ–º–æ-—Ä–µ–∂–∏–º –¥–ª—è –≤–µ–±)
- ‚úÖ VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–¥–µ–º–æ-—Ä–µ–∂–∏–º –¥–ª—è –≤–µ–±)
- ‚úÖ –ì–æ—Å—Ç–µ–≤–æ–π –≤—Ö–æ–¥
- ‚úÖ –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Firestore
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### **‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- –í–µ–±-–≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ–º–æ-—Ä–µ–∂–∏–º –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- Deprecated –º–µ—Ç–æ–¥—ã RadioListTile (—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º)

---

## üìã **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1**
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** –≤ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
2. **–û–±–Ω–æ–≤–∏—Ç—å deprecated –º–µ—Ç–æ–¥—ã** (RadioListTile, withOpacity)
3. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2**
1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º Firebase** (–∑–∞–º–µ–Ω–∏—Ç—å –¥–µ–º–æ-—Ä–µ–∂–∏–º)
2. **–£–ª—É—á—à–µ–Ω–∏–µ UX** (–∞–Ω–∏–º–∞—Ü–∏–∏, –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
3. **–î–æ–±–∞–≤–∏—Ç—å –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3**
1. **–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
2. **SSO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
3. **–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

---

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!** 

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- Email/–ø–∞—Ä–æ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞
- –°–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π (Google, VK)
- –ì–æ—Å—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Firestore

**–ó–∞–ø—É—Å–∫ `flutter run -d chrome` –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**, –∏ –≤—Å–µ –º–µ—Ç–æ–¥—ã –≤—Ö–æ–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–í–µ—Ç–∫–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è merge –≤ main!** üöÄ
