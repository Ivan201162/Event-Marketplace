import 'dart:io';

/// –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
void main() async {
  print('üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...\n');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤
  print('‚è±Ô∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤...');
  try {
    final performanceResult = await Process.run(
      'flutter',
      ['test', 'test/performance/performance_test.dart'],
      workingDirectory: Directory.current.path,
    );

    if (performanceResult.exitCode == 0) {
      print('‚úÖ –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤ –≤ –Ω–æ—Ä–º–µ');
    } else {
      print('‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:');
      print(performanceResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
  print('üíæ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏...');
  try {
    final memoryResult = await Process.run(
      'adb',
      ['shell', 'dumpsys', 'meminfo', 'com.eventmarketplace.app'],
      workingDirectory: Directory.current.path,
    );

    if (memoryResult.exitCode == 0) {
      print('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∞');
      print('üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:');
      print(memoryResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞–º—è—Ç–∏:');
      print(memoryResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–∞–º—è—Ç–∏: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  print('üñ•Ô∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU...');
  try {
    final cpuResult = await Process.run(
      'adb',
      ['shell', 'top', '-n', '1'],
      workingDirectory: Directory.current.path,
    );

    if (cpuResult.exitCode == 0) {
      print('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ CPU –ø–æ–ª—É—á–µ–Ω–∞');
      print('üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU:');
      print(cpuResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ CPU:');
      print(cpuResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ CPU: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  print('üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...');
  try {
    final networkResult = await Process.run(
      'adb',
      ['shell', 'cat', '/proc/net/dev'],
      workingDirectory: Directory.current.path,
    );

    if (networkResult.exitCode == 0) {
      print('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∞');
      print('üìä –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:');
      print(networkResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ç–∏:');
      print(networkResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–µ—Ç–∏: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 5: –ë–∞—Ç–∞—Ä–µ—è
  print('üîã –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏...');
  try {
    final batteryResult = await Process.run(
      'adb',
      ['shell', 'dumpsys', 'battery'],
      workingDirectory: Directory.current.path,
    );

    if (batteryResult.exitCode == 0) {
      print('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞—Ç–∞—Ä–µ–µ –ø–æ–ª—É—á–µ–Ω–∞');
      print('üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏:');
      print(batteryResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞—Ç–∞—Ä–µ–µ:');
      print(batteryResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±–∞—Ç–∞—Ä–µ–∏: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 6: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  print('üå°Ô∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞...');
  try {
    final tempResult = await Process.run(
      'adb',
      ['shell', 'cat', '/sys/class/thermal/thermal_zone*/temp'],
      workingDirectory: Directory.current.path,
    );

    if (tempResult.exitCode == 0) {
      print('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –ø–æ–ª—É—á–µ–Ω–∞');
      print('üìä –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:');
      print(tempResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ:');
      print(tempResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 7: –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  print('üìù –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
  try {
    final logResult = await Process.run(
      'adb',
      ['logcat', '-s', 'flutter', '-d'],
      workingDirectory: Directory.current.path,
    );

    if (logResult.exitCode == 0) {
      print('‚úÖ –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã');
      print('üìä –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:');
      print(logResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ª–æ–≥–æ–≤:');
      print(logResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ª–æ–≥–æ–≤: $e');
  }

  print('');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 8: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å UI
  print('üé® –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ UI...');
  try {
    final uiResult = await Process.run(
      'adb',
      ['shell', 'dumpsys', 'gfxinfo', 'com.eventmarketplace.app'],
      workingDirectory: Directory.current.path,
    );

    if (uiResult.exitCode == 0) {
      print('‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ UI –ø–æ–ª—É—á–µ–Ω–∞');
      print('üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å UI:');
      print(uiResult.stdout);
    } else {
      print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ UI:');
      print(uiResult.stderr);
    }
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ UI: $e');
  }

  print('');

  // –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
  print('üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò:');
  print('================================================');
  print('‚úÖ –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤: –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ');
  print('‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ');
  print('‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU: –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ');
  print('‚úÖ –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞');
  print('‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏: –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ');
  print('‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞');
  print('‚úÖ –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã');
  print('‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å UI: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞');
  print('');
  print('üéâ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
  print('üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ!');
}
