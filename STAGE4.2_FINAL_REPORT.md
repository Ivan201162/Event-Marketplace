# STAGE 4.2 - –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢

**–î–∞—Ç–∞:** 2024-11-03  
**–í–µ—Ç–∫–∞:** prod/stage4.2-home-request-search

---

## ‚úÖ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

### 1. –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (home_screen_simple.dart)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏:**
  - –°—Ç—Ä–æ–∫–∞ 1 (–∫—Ä—É–ø–Ω–æ): –ò–º—è + –§–∞–º–∏–ª–∏—è (firstName + lastName)
  - –°—Ç—Ä–æ–∫–∞ 2 (–º–µ–Ω—å—à–µ): @username (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –ï—Å–ª–∏ username –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí —Ç–æ–ª—å–∫–æ –§–ò–û –∫—Ä—É–ø–Ω–æ
  
- **–ì–æ—Ä–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
  - –í–º–µ—Å—Ç–æ "–ù–∞–π–¥–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞..." ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥–æ—Ä–æ–¥ –∏–∑ –ø–æ–ª—è `city`
  - –ï—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Üí "–ì–æ—Ä–æ–¥ –Ω–µ –≤—ã–±—Ä–∞–Ω"
  
- **–ê–≤–∞—Ç–∞—Ä:**
  - –ï—Å–ª–∏ –µ—Å—Ç—å photoURL ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ç–æ
  - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –∏–∫–æ–Ω–∫–∞ Icons.person
  
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
  - –ê–≤–∞—Ç–∞—Ä ‚Üí `/profile/{uid}`
  - –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" ‚Üí `/requests/create` (—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º CREATE_REQUEST_OPENED)
  - –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞" ‚Üí `/search`

### 2. –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (create_request_screen_enhanced.dart)
- **–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –ø–æ–ª—è–º–∏:**
  - –¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ + "–î—Ä—É–≥–æ–µ" —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–ª–µ–º)
  - –î–∞—Ç–∞ (DatePicker) –∏ –≤—Ä–µ–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ì–æ—Ä–æ–¥ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ë—é–¥–∂–µ—Ç (–æ—Ç/–¥–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –û–ø–∏—Å–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - –í–ª–æ–∂–µ–Ω–∏—è (–¥–æ 10 —Ñ–∞–π–ª–æ–≤, –∫–∞–∂–¥—ã–π –¥–æ 10 –ú–ë, jpg/png/webp/pdf/doc/docx)

- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:**
  - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª—ã"
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ (10 –ú–ë) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (10 —Ñ–∞–π–ª–æ–≤)
  - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase Storage: `/requests/{userId}/{requestId}/{filename}`
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ URL –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∑–∞—è–≤–∫–∏

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Firestore:**
  - –ö–æ–ª–ª–µ–∫—Ü–∏—è `requests`
  - –ü–æ–ª—è: eventType, date, time, city, venue, budgetMin/Max, guestsCount, description, attachments, createdBy, createdAt, status

- **UI:**
  - ListView —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
  - –ö–Ω–æ–ø–∫–∞ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∑–∞—è–≤–∫—É" —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤–Ω–∏–∑—É
  - Loading indicators –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–µ

- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - REQUEST_CREATE_OPENED –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
  - REQUEST_PUBLISHED:{requestId} –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

- **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
  - Snackbar "–ó–∞—è–≤–∫–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞"
  - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/requests`

### 3. –≠–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞ (search_screen_enhanced.dart)
- **–ü–æ–ª–µ –ø–æ–∏—Å–∫–∞:**
  - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, username (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
  - –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `role == "specialist"`
  - –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ø–æ–∏—Å–∫–∞

- **–ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
  - –ì–æ—Ä–æ–¥ (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ)
  - –†–µ–π—Ç–∏–Ω–≥ (–º–∏–Ω. 1-5)
  - –¶–µ–Ω–∞ (–æ—Ç/–¥–æ)
  - –ö–Ω–æ–ø–∫–∏ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" –∏ "–°–±—Ä–æ—Å–∏—Ç—å"

- **UI –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
  - –ü—É—Å—Ç–æ–π –ø–æ–∏—Å–∫ ‚Üí "–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä"
  - –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
  - Back button ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ `/main` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PopScope)

- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - SEARCH_OPENED –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
  - SEARCH_FILTER_APPLIED –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - SEARCH_RESULT_COUNT:{count} –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 4. Firestore –∏ Storage
- **Storage –ø—Ä–∞–≤–∏–ª–∞:**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è `/requests/{userId}/{requestId}/...`
  - –†–∞–∑—Ä–µ—à–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ —Å–≤–æ—é –ø–∞–ø–∫—É
  - –ú–∞–∫—Å–∏–º—É–º 10 –ú–ë –Ω–∞ —Ñ–∞–π–ª
  - –†–∞–∑—Ä–µ—à–µ–Ω—ã: jpg/jpeg/png/webp/pdf/doc/docx

- **Firestore:**
  - –ö–æ–ª–ª–µ–∫—Ü–∏—è `requests` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—è–≤–æ–∫
  - –ò–Ω–¥–µ–∫—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ createdAt desc)

### 5. Router (app_router_minimal_working.dart)
- –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/requests/create` ‚Üí CreateRequestScreenEnhanced
- –û–±–Ω–æ–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/search` ‚Üí SearchScreenEnhanced

---

## ‚úÖ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

–í—Å–µ –º–∞—Ä–∫–µ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã:
- ‚úÖ REQUEST_CREATE_OPENED
- ‚úÖ REQUEST_PUBLISHED:{requestId}
- ‚úÖ SEARCH_OPENED
- ‚úÖ SEARCH_FILTER_APPLIED
- ‚úÖ SEARCH_RESULT_COUNT:{count}

---

## ‚úÖ –ö–û–ú–ú–ò–¢

```
git checkout -B prod/stage4.2-home-request-search
git add .
git commit -m "stage4.2: home + create request + search implemented"
```

---

## üìã TODO –î–õ–Ø –°–õ–ï–î–£–Æ–©–ï–ì–û –≠–¢–ê–ü–ê

‚¨ú –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–∫–∏  
‚¨ú –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–∞—Ç—å—Å—è –Ω–∞ –∑–∞—è–≤–∫—É  
‚¨ú –ù–∞—Ç–∏–≤–Ω—ã–π datepicker + timepicker  
‚¨ú Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´

